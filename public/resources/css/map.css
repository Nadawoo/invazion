/*
 * CSS de la carte
 */
#map {
    float:left;
    margin:0 0.2em 3em 0;
    max-width:95%;
    font-size:1.05em;
    border-radius:0.5em;
    background:repeating-linear-gradient(0.38turn, black, black 2px, #17202a 2px, #17202a 4px);
    box-shadow: 5px 5px 10px black;
    /* Pour que la largeur de la ville en surimpression soit calculée 
       par rapport celle la carte et pas à celle de la page */
    position:relative;
}
#map ::selection {
    background:none;
}

/*
 * Zooming on the map
 */
#map_body_wrapper {
    /* Avoids map overflow when the map is zoomed */
    overflow:hidden;
    width:100%;
}
#map_body {
    position:relative;
    /* Avoids hiding zones under the borders when the map is unzoomed
       (due to the artificial horizontal shifting of the rows) */
    padding:1em;
}
#map_body.zoomedIn {
    transform:scale(300%);
    transition: all .3s ease;
    /* Forces the zoom to start from the corner of the map. The default behavior
       (zoom on the center) would place the top and left parts out of the scrollbars. */
    transform-origin: top left;
}
#map_body.zoomedIn .bubble {
    /* Avoids getting an enormous bubble when the map is zoomed */
    transform:scale(33%);
    bottom:1.5em;
}
#map_body.zoomedOut {
    /* Cancels the zoom */
    transform:scale(100%);
    transition: all .4s ease;
}

/* 
 * Buttons +/- to zoom in/out on the map
 */
#map_navigation {
    display:flex;
    flex-direction:column;
    justify-content: space-between;
    align-items: flex-end;
    position:absolute;
    top:  8rem;
    right:0.5em;
}
#map_navigation button {
    display:flex;
    justify-content: center;
    align-items: center;
    height:1em;
    width: 1em;
    margin:0.05em 0;
    border-radius:50%;
    font-size:3em;
    border:none;
    background:lightgrey;
    opacity:0.8;
    box-shadow: 12px 12px 12px black;
}
/* Specific sub-menu to select the desired satellite view */
#map_navigation #mapRadarMenu {
    display:none; /* The menu is hidden until we click on the satellite button */
    margin:0.5em 0;
    padding:0;
    font-size:0.9em;
    background:#34495e;
    color:white;
    border:1px solid lightgrey;
    border-radius:0.2em;
    list-style-type:none;
    box-shadow: 12px 12px 12px black;
}
#mapRadarMenu:before {
    content: "▲";
    color:#b3b6b7;
    position:absolute;
    right:1.2em;
    margin-top:-1em;
}
#mapRadarMenu li {
    padding:0.4em 0.5em;
    border-bottom:1px solid lightgrey;
    cursor:pointer;
}
#mapRadarMenu li:last-child {
    /* Avoids having a double border <li> + <ul> */
    border-bottom:none;
}
#mapRadarMenu li:hover {
    background:#5d6d7e;
}

/*
 * Map header
 */
#map_header {
    position:relative;
    margin-bottom:0.5em;
    text-align:center;
    font-size:0.9em;
    z-index:10; /* Keeps the block over the zones when zoming on the map*/
}

#statusbar {
    display:flex;
    justify-content:space-around;
    width:17rem;
    margin:0.5em auto 0.5em auto;
    padding:0.4em;
    padding-bottom:0.3em;
}
#statusbar .status {
    position:relative;
    height:2.8rem;
    width: 2.8rem;
    border:1px solid white;
    border-radius:0.4rem;
    font-size:1.8em;
    font-weight:bold;
    display:flex;
    justify-content: center;
    align-items: center;
    background:#fbeee6; /* Useful when the content is text, not image */
    cursor:help;
}
#statusbar img {
    height:100%;
    width: 100%;
    border-radius:0.3rem;
    outline:3px solid red;
}
#statusbar .dot_number {
    position:absolute;
    top:  -0.3em;
    right:-0.3em;
    height:1.4em;
    width: 1.4em;
    background:red;
    font-size:0.5em;
    border-radius:0.1em;
    line-height:130%;
}
#statusbar .empty {
    background:none; /* Useful when the content is text, not image */
    cursor:default;
}


#map .row {
    white-space:nowrap;
    /* On remonter l'hexagone pour l'emboîter dans la ligne du dessus.
       Mieux qu'une position relative "top:-1em", qui créerait un gros blanc 
       sous la carte. */
    margin:-0.95em;
}
#map_body .row:nth-child(odd) {
    /* Shift 1 line of 2 to fit the hexagons staggered */
    padding-left:1.2em;
}

.hexagon, .not_visited {
    
    /* Pour le débogage : décommenter cette ligne pour afficher le conteneur*/
    /*border:1px solid red;*/
    
    background-image:url("../img/copyrighted/tiles/desert/9.png");
    background-repeat:no-repeat;
    background-size:100%;
    text-align:center;
    cursor:default;
    display:inline-block;
    /* La largeur détermine la taille de l'hexagone */
    width:        2.4em;
    /* La hauteur va dépendre de la largeur : une bordure devra arriver 
    pile à la pointe du bas de l'hexagone */
    height:       3.1em;
    /* Assure que le conteneur intérieur ne déborde pas en bas
    (tracer une bordure sur square_container) )*/
    line-height:2.55em;
    /* Evite que les éventuelles marges intérieures agrandissent le conteneur */
    box-sizing: border-box;
}
.square_container {
    
    /* Pour le débogage : décommenter cette ligne pour afficher le conteneur*/
    /* border:1px solid red; */
    
    /* La largeur doit inscrire la bordure de .square_container 
    pile dans celle de .hexagon */
    width:  2.5rem;
    /* La hauteur doit être égale à la largeur pour garantir 
    que le conteneur sera parfaitement carré */
    height: 2.5rem;
    /* Evite que les éventuelles marges intérieures agrandissent le conteneur */
    box-sizing: border-box;
    /* Centre le conteneur horizontalement */
    margin:auto;
    /* Hack CSS pour centrer le conteneur verticalement */
    position: relative;
    top: 45%; /* poussé de la moitié de hauteur du référent */
    transform: translateY(-50%); /* tiré de la moitié de sa propre hauteur */
    /* Centrage des éléments à l'intérieur de la case */
    display:flex;
    flex-direction: column;
    align-items:center;
    justify-content: center;
    /* Recentre verticalement le texte à l'intérieur du conteneur.
    Calibrage: le fond coloré sous le texte doit toucher la bordure du bas du conteneur. */
    line-height:2.2em;
}

/* Surelevate the zones with cities or buildings */
#map .elevate {
    position:relative;
    top:-0.3rem;
}

/*
 * An <svg> area covers the map to allow drawing on it (lines between zones...)
 */
#mapSvg {
    position:absolute;
    top:0;
    left:0;
    width: 100%;
    height:100%;
    opacity:0.8;
}
#mapSvg line {
    stroke:green;
    stroke-width:4;
}

/*
 * Tiles
 */
/*.ground_stone, .ground_circus {
    background-image:url("../img/copyrighted/tiles/desert/1.png");
}*/
.ground_grass {
    background-image:url("../img/copyrighted/tiles/greenjungle/3.png");
}
.ground_peeble {
    background-image:url("../img/copyrighted/tiles/desert/2.png");
}
.ground_sand {
    background-image:url("../img/copyrighted/tiles/desert/9.png");
}
.ground_lava {
    background-image:url("../img/copyrighted/tiles/volcanic/7.png");
    background-position-y: 0.25em;
}
.ground_water {
    background-image:url("../img/copyrighted/tiles/greenjungle/6.png");
    background-position-y: 0.25em;
}
.ground_drywoods {
    background-image:url("../img/copyrighted/tiles/desert/5.png");
}

.ground_zombies {
    background-image:url("../img/copyrighted/tiles/grey/5.png");
}

.ground_city {
    background-image:url("../img/copyrighted/tiles/greenjungle/3.png");
}


#map .icon_html { /* Makes the unicode icons bigger without shifting the map tiles */
    font-size:1.3em;
    margin-bottom:0.2em;
}
#map .zombies {
    position:absolute;
    font-weight:bold;
    color:darkred;
    opacity:0.7;
}

/*
 * Bulles d'information sur la carte
 */
.bubble {
    display:none;
    position:absolute;
    bottom:3.2em;
    left:-7em;
    line-height:1em;
    width:17em;
    padding:0.3em;
    text-align:left;
    white-space: normal;
    hyphens: auto;
    background:darkred;
    color:white;
    border:1px solid red;
    border-radius:0.4em;
    font-family:Calibri;
    font-size:0.8em;    
    box-shadow: 12px 12px 12px black;
    z-index:2;
}
.triangle_down {
    width:0;
    height:0;
    border-left: 0.6em solid transparent;
    border-right:0.6em solid transparent;
    border-top:  1em solid red;
    position:absolute;
    left:7.8em;
    bottom:-1em;
    z-index:2;
}
.bubble .roleplay {
    margin-top:0.7rem;
    padding:0.3em 0.2em;
    font-size:1.1em;
    line-height:110%;
    background:#c40007;
    border-radius:0.2em;
}
.bubble h5 {
    font-size:1.2em;
    margin:0;
}
.bubble hr {
    color:white;
    margin:0.2em 0;
}

/* Symbole indiquant la présence d'objets sur la case */
.items {
    position:absolute;
    font-size:80%;
}
/* Symbole d'un citoyen sur la carte hexagonale */
.map_citizen {
    border-radius:50%;
    font-weight:bold;
    background:lightsteelblue;
    height:100%;
    width:100%;
}
#me {
    position:absolute;
    background:lightgreen;
    animation: blinker 2s linear infinite;
}
@keyframes blinker {
    50% {
        opacity: 0;
    }
}
#me img {
    height:1.7em;
    margin-top:0.2em;
}
/* Ligne de zombies (zombies de l'attaque') */
.hurd {
    display:block;
    position:absolute;
    margin-top:-1em;
    z-index:1;
}
.hurd .icon {
    position:absolute;
    margin-left:0.35em;
    font-size:1.5em;
    z-index:2;
}
.hurd .triangle {
    position:relative;
    top:2.4em;
    /* Crée un triangle en CSS */
    width:0;
    height:0;
    border-left: 1.25em solid transparent;
    border-right:1.25em solid transparent;
    border-top:2em solid red;
}

.halo {
    position:absolute;
    border: 3px solid green;
    border-radius: 50%;
    height:100%;
    width: 100%;
}

#map .city img {
    height:24px;
    width: 24px;
}

.city_nbr_def {
    position:absolute;
    bottom:-0.8em;
    color:white;
    font-weight:bold;
    font-size:0.8em;
}

/* Puce de localisation sur la carte */
.location {
    height:2em;
    position:absolute;
    margin-left:-1em;
    margin-top:-3.2em;
}
